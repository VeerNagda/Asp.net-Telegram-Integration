{"ast":null,"code":"import * as i0 from \"@angular/core\";\nconst _c0 = [\"script\"];\nconst _c1 = [\"*\"];\nexport class TelegramLoginComponent {\n  ngAfterViewInit() {\n    this.convertToScript();\n  }\n  convertToScript() {\n    const element = this.script.nativeElement;\n    const script = document.createElement('script');\n    script.src = 'https://telegram.org/js/telegram-widget.js?5';\n    script.setAttribute('data-telegram-login', \"SoftconBot\");\n    script.setAttribute('data-size', 'large');\n    // Define the callback function in local scope\n    const loginViaTelegram = user => {\n      console.log('Logged in via Telegram', user);\n      // Do something with the user object\n    };\n    // Reference the local callback function in the data-onauth attribute\n    script.setAttribute('data-onauth', 'loginViaTelegram');\n    script.setAttribute('data-request-access', 'write');\n    element.parentElement.replaceChild(script, element);\n  }\n}\nTelegramLoginComponent.ɵfac = function TelegramLoginComponent_Factory(t) {\n  return new (t || TelegramLoginComponent)();\n};\nTelegramLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TelegramLoginComponent,\n  selectors: [[\"app-telegram-login\"]],\n  viewQuery: function TelegramLoginComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.script = _t.first);\n    }\n  },\n  ngContentSelectors: _c1,\n  decls: 3,\n  vars: 2,\n  consts: [[\"script\", \"\"]],\n  template: function TelegramLoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"div\", null, 0);\n      i0.ɵɵprojection(2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"display\", \"none\");\n    }\n  },\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;AAMA,OAAM,MAAOA,sBAAsB;EAGjCC,eAAe;IACb,IAAI,CAACC,eAAe,EAAE;EACxB;EAEAA,eAAe;IACb,MAAMC,OAAO,GAAG,IAAI,CAACC,MAAM,CAACC,aAAa;IACzC,MAAMD,MAAM,GAAGE,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CH,MAAM,CAACI,GAAG,GAAG,8CAA8C;IAC3DJ,MAAM,CAACK,YAAY,CAAC,qBAAqB,EAAE,YAAY,CAAC;IACxDL,MAAM,CAACK,YAAY,CAAC,WAAW,EAAE,OAAO,CAAC;IAEzC;IACA,MAAMC,gBAAgB,GAAIC,IAAS,IAAI;MACrCC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEF,IAAI,CAAC;MAC3C;IACF,CAAC;IAED;IACAP,MAAM,CAACK,YAAY,CAAC,aAAa,EAAE,kBAAkB,CAAC;IACtDL,MAAM,CAACK,YAAY,CAAC,qBAAqB,EAAE,OAAO,CAAC;IACnDN,OAAO,CAACW,aAAa,CAACC,YAAY,CAACX,MAAM,EAAED,OAAO,CAAC;EACrD;;AAxBWH,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAAgB;EAAAC;IAAA;;;;;;;;;;;;;;;MAFtBC,oCAAwC;MAAAA,kBAAyB;MAAAA,iBAAM;;;MAA1DA,iCAA0B","names":["TelegramLoginComponent","ngAfterViewInit","convertToScript","element","script","nativeElement","document","createElement","src","setAttribute","loginViaTelegram","user","console","log","parentElement","replaceChild","selectors","viewQuery","i0"],"sourceRoot":"","sources":["D:\\ASP\\Telegram Integration\\Telegram Integration\\ClientApp\\src\\app\\telegram-login\\telegram-login.component.ts"],"sourcesContent":["import {AfterViewInit, Component, ElementRef, ViewChild} from '@angular/core';\n\n@Component({\n  selector: 'app-telegram-login',\n  template: '<div #script [style.display]=\"\\'none\\'\"><ng-content></ng-content></div>',\n})\nexport class TelegramLoginComponent implements AfterViewInit{\n  @ViewChild('script', {static: true}) script!: ElementRef;\n\n  ngAfterViewInit(): void {\n    this.convertToScript();\n  }\n\n  convertToScript() {\n    const element = this.script.nativeElement;\n    const script = document.createElement('script');\n    script.src = 'https://telegram.org/js/telegram-widget.js?5';\n    script.setAttribute('data-telegram-login', \"SoftconBot\");\n    script.setAttribute('data-size', 'large');\n\n    // Define the callback function in local scope\n    const loginViaTelegram = (user: any) => {\n      console.log('Logged in via Telegram', user);\n      // Do something with the user object\n    };\n\n    // Reference the local callback function in the data-onauth attribute\n    script.setAttribute('data-onauth', 'loginViaTelegram');\n    script.setAttribute('data-request-access', 'write');\n    element.parentElement.replaceChild(script, element);\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}